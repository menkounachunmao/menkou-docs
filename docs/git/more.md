# 更多

## 提交准则

### 保持提交干净

1，不要提交无用的变更

不要整体格式化代码，原则上来说一个项目的编码风格是保持一致的，但难免会因为个人配置导致差异。

2，逻辑上的独立变更集

一个问题一次提交，不要把好几个修改放在同一个提交里面，这样保证提交的文件都是针对同一功能点或者问题，方便提交审查或者后面回退及选择。

## 贮藏与清理

> 有时，当你在项目的一部分上已经工作一段时间后，所有东西都进入了混乱的状态， 而这时你想要切换到另一个分支做一点别的事情。 问题是，你不想仅仅因为过会儿回到这一点而为做了一半的工作创建一次提交。 针对这个问题的答案是 git stash 命令。

```git stash```会处理工作目录的脏的状态——即跟踪文件的修改与暂存的改动——然后将未完成的修改保存到一个栈上， 而你可以在任何时候```git stash apply```重新应用这些改动（甚至在不同的分支上）。

查看贮藏列表

```bash
git stash list
```

删除

```bash
git stash drop
```

只贮藏未暂存的文件

```bash
git stash --keep-index
```

贮存文件包含未跟踪

```bash
git stash -u

git stash -a // 包含忽略的文件
```

### 清理工作空间

```-d```移除工作目录中所有未追踪的文件以及空的子目录,```-n```展示出将要移除的文件。

```git clean``` 命令只会移除没有忽略的未跟踪文件。 任何与 .gitignore 或其他忽略文件中的模式匹配的文件都不会被移除。 如果你也想要移除那些文件，可以给 ```clean``` 命令增加一个 -x 选项。

使用```-i```进入交互式命令操作更加方便

```bash
 git clean  -i
```

## 高级合并

### 撤销合并

#### 修复引用

如果只存在于本地仓库中，```git merge``` 后 ```git reset --hard HEAD~``` 可以重置分支的指向。

#### 还原提交

> 生成一个新提交的选项，提交将会撤消一个已存在提交的所有修改

```bash
git revert -m 1 HEAD
```

```-m 1``` 标记指出 “mainline” 需要被保留下来的父结点。

还原后再合并分支会显示已经是最新，因为所有差异已被合并。要想再合并分支可先还原撤销😵,```git revert <提交>```
