# 作用域

## 作用域是什么？

> 作用域是一套规则，用于确定在何处以及如何查找变量（标识符）。

通常编译过程：分词/词法分析-解析/语法分析-代码生成。

## 词法作用域

### 概念

js 采用词法作用域

定义在词法阶段的作用域，词法作用域是在写代码时将变量和块作用域写在哪里来决定的，因此当词法分析器处理代码时会保持作用域 不变（大部分情况下是这样的）。

### 查找标识符

始终从运行时所处的最内部作用域开始，逐级向外或者说向上进行,直到第一个匹配的标识符时停止。在多层的嵌套作用域中可以定义同名的 标识符，这叫作“遮蔽效应”（内部的标识符“遮蔽”了外部的标识符）。

无论函数在哪里被调用，也无论它如何被调用，它的词法作用域都只由函数被声明时所处 的位置决定。

词法作用域查找只会查找一级标识符，比如 a、b 和 c。如果代码中引用了 foo.bar.baz， 词法作用域查找只会试图查找 foo 标识符，找到这个变量后，`对象属性访问规则`会分别接 管对 bar 和 baz 属性的访问。

### 欺骗词法

- eval
- with

会影响性能，JavaScript 引擎会在编译阶段进行数项的性能优化。其中有些优化依赖于能够根据代码的 词法进行静态分析，并预先确定所有变量和函数的定义位置，才能在执行过程中快速找到 标识符。

## 函数作用域
